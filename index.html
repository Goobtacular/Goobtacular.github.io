<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
  <title>Parallax Dream</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: auto;
      min-height: 100%;
      overflow-x: hidden;
      font-family: sans-serif;
    }

    #parallax-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    #parallax-background {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      background-image: url("https://picsum.photos/1024/3096");
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center top;
      will-change: transform;
    }

    main {
      position: relative;
      z-index: 1;
      min-height: 400vh;
      padding-top: 5vh;
      padding-bottom: 50vh;
    }

    .content-section {
      height: 60vh;
      width: 80%;
      margin: 10vh auto;
      background-color: rgba(255, 255, 255, 0.9);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      border-radius: 12px;
      padding: 2rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
    }

    .alt-section {
      height: 30vh;
      width: 60%;
      margin: 5vh auto;
      background-color: rgba(0, 0, 0, 0.6);
      color: white;
      padding: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      font-style: italic;
      text-align: center;
      box-shadow: 0 0 30px rgba(255, 255, 255, 0.1);
      clip-path: polygon(
        5% 0%, 20% 0%, 22% 5%, 78% 5%, 80% 0%, 95% 0%,
        100% 5%, 100% 20%, 95% 22%, 95% 78%, 100% 80%, 100% 95%,
        95% 100%, 80% 100%, 78% 95%, 22% 95%, 20% 100%, 5% 100%,
        0% 95%, 0% 80%, 5% 78%, 5% 22%, 0% 20%, 0% 5%
      );
    }

    .tech-section {
      height: 60vh;
      width: 80%;
      margin: 10vh auto;
      background-color: rgba(30, 30, 30, 0.85);
      color: #00ffff;
      padding: 2rem;
      font-size: 1.6rem;
      text-align: center;
      font-family: monospace;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 20px rgba(0, 255, 255, 0.3);
      position: relative;
      z-index: 1;
      clip-path: polygon(
        8% 0%, 12% 6%, 20% 6%, 22% 0%,
        78% 0%, 80% 6%, 88% 6%, 92% 0%,
        100% 0%, 100% 10%, 94% 12%, 94% 88%,
        100% 90%, 100% 100%, 92% 100%, 88% 94%,
        80% 94%, 78% 100%, 22% 100%, 20% 94%,
        12% 94%, 8% 100%, 0% 100%, 0% 90%,
        6% 88%, 6% 12%, 0% 10%, 0% 0%
      );
    }

    .chat-bubble-left, .chat-bubble-right {
      height: 30vh;
      width: 60%;
      margin: 5vh auto;
      background-color: rgba(10, 10, 10, 0.85);
      color: #00ffee;
      padding: 1.5rem;
      font-size: 1.4rem;
      font-family: monospace;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 30px rgba(0, 255, 255, 0.35);
      opacity: 0;
      filter: blur(6px);
      transition: opacity 1s ease-out, transform 1s ease-out, filter 1s ease-out;
	  outline: 2px solid black;
	  outline-offset: -2px;
    }

    .chat-bubble-right {
      transform: translateX(60%) scale(0.9); 
      clip-path: polygon(
    5% 0%, 95% 0%, 100% 10%, 100% 90%,
    95% 100%, 5% 100%, 0% 90%, 0% 10%
  );
    }

	.chat-bubble-left {  
	  -webkit-mask-image: url("../docs/assets/bubble-mask.svg");
	  mask-image: url("../docs/assets/bubble-mask.svg");
	  -webkit-mask-repeat: no-repeat;
	  mask-repeat: no-repeat;
	  -webkit-mask-size: contain;
	  mask-size: contain;
	  -webkit-mask-position: center;
	  mask-position: center;

	  background-color: rgba(10, 10, 10, 0.85);
	  color: #00ffee;
	  padding: 1.5rem;
	  font-size: 1.4rem;
	  font-family: monospace;
	  text-align: center;
	  display: flex;
	  align-items: center;
	  justify-content: center;
	  box-shadow: 0 0 30px rgba(0, 255, 255, 0.35);
	  opacity: 0;
	  filter: blur(6px);
	  transition: opacity 1s ease-out, transform 1s ease-out, filter 1s ease-out;

	  width: 60%;
	  height: 30vh;
	  margin: 5vh auto;
	  transform: translateX(-60%) scale(0.9);
	}

    .chat-bubble-left.animate-in {
      opacity: 1;
      transform: translateX(0) scale(1);
      filter: blur(0);
    }

    .chat-bubble-right.animate-in {
      opacity: 1;
      transform: translateX(0) scale(1);
      filter: blur(0);
    }

	.chat-bubble-overwatch {
	  position: relative;
	  width: 65%;
	  margin: 6vh auto;
	  padding: 2rem 2.5rem;
	  background: linear-gradient(to bottom right, #0e0e0e, #1c1c1c);
	  color: #00ffd5;
	  font-family: "Share Tech Mono", monospace;
	  font-size: 1.2rem;
	  text-align: center;
	  text-transform: uppercase;
	  letter-spacing: 1.5px;

	  /* Outer frame with multi-layered glow */
	  border: 2px solid #00ffd5;
	  box-shadow:
		0 0 10px rgba(0, 255, 213, 0.4),
		inset 0 0 5px rgba(0, 255, 213, 0.2),
		0 0 30px rgba(0, 255, 213, 0.1);

	  clip-path: polygon(
		4% 0%, 10% 4%, 16% 0%,
		92% 0%, 96% 5%, 100% 10%,
		100% 20%, 96% 22%,
		96% 40%, 100% 42%,
		100% 80%, 96% 82%, 96% 90%,
		100% 94%, 96% 100%, 88% 96%,
		12% 96%, 8% 100%, 4% 96%,
		0% 92%, 4% 80%, 0% 40%,
		4% 10%
	  );

	  /* Decorative inner border effect using pseudo-element */
	  --frame-color: #00ffd5;
	  --frame-glow: rgba(0, 255, 213, 0.3);
	  --frame-offset: 10px;

	  opacity: 0;
	  transform: scale(0.9);
	  transition:
		opacity 0.9s ease-out,
		transform 0.9s ease-out,
		box-shadow 0.9s ease-out;
	}

	.chat-bubble-overwatch::before {
	  content: "";
	  position: absolute;
	  top: var(--frame-offset);
	  bottom: var(--frame-offset);
	  left: var(--frame-offset);
	  right: var(--frame-offset);
	  border: 1px dashed var(--frame-color);
	  opacity: 0.3;
	  clip-path: polygon(
		6% 0%, 94% 0%, 98% 10%, 98% 90%,
		94% 100%, 6% 100%, 2% 90%, 2% 10%
	  );
	  pointer-events: none;
	}

	/* Glowing animated pulse ring */
	.chat-bubble-overwatch::after {
	  content: "";
	  position: absolute;
	  top: -12px;
	  bottom: -12px;
	  left: -12px;
	  right: -12px;
	  border: 2px solid transparent;
	  border-radius: 12px;
	  animation: pulseBorder 3s infinite ease-in-out;
	  pointer-events: none;
	}

	@keyframes pulseBorder {
	  0% {
		box-shadow: 0 0 0px rgba(0, 255, 213, 0.2);
	  }
	  50% {
		box-shadow: 0 0 18px rgba(0, 255, 213, 0.45);
	  }
	  100% {
		box-shadow: 0 0 0px rgba(0, 255, 213, 0.2);
	  }
	}

	/* Scroll-triggered animation */
	.chat-bubble-overwatch.animate-in {
	  opacity: 1;
	  transform: scale(1);
	  box-shadow:
		0 0 16px rgba(0, 255, 213, 0.5),
		inset 0 0 8px rgba(0, 255, 213, 0.3),
		0 0 40px rgba(0, 255, 213, 0.2);
	}

    .typing-dots {
      display: inline-block;
      vertical-align: middle;
      font-size: 1.4rem;
      color: #00ffee;
    }

    .typing-dots span {
      animation: blink 2.7s infinite;
    }

    .typing-dots span:nth-child(2) {
      animation-delay: 0.2s;
    }

    .typing-dots span:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes blink {
      0% { opacity: 0.2; }
      20% { opacity: 1; }
      100% { opacity: 0.2; }
    }
  </style>
</head>
<body>

  <div id="parallax-container">
    <div id="parallax-background"></div>
  </div>

  <main>
    <div class="content-section">Welcome to the Dream</div>
    <div class="alt-section">"Sometimes the in-between is the most important part."</div>
    <div class="content-section">Let It Sink In...</div>
    <div class="tech-section">üå´ A quiet moment drifts by...</div>
    <div class="content-section">A Moment to Breathe</div>

    <div class="chat-bubble-left">ü§ñ ‚ÄúWe are broadcasting from the mainframe‚Ä¶‚Äù</div>
	
	<div class="chat-bubble-highdetail">üß† ‚ÄúConnection to dreamscape established. Enforcing dominion..‚Äù</div>

	<div class="chat-bubble-left">üåå ‚ÄúStars align beyond the firewalls‚Ä¶‚Äù</div>

    <div class="content-section">Almost There...</div>
    <div class="alt-section">üåå The stars begin to shine through...</div>
    <div class="content-section">End of the Dream üåô</div>
  </main>

  <script>
    const bg = document.getElementById("parallax-background");

    function updateParallax() {
      const scrollTop = window.scrollY;
      const maxScroll = document.body.scrollHeight - window.innerHeight;
      const maxTranslate = bg.offsetHeight - window.innerHeight;
      const progress = scrollTop / maxScroll;
      const yOffset = progress * maxTranslate;
      bg.style.transform = `translateY(-${yOffset}px)`;
    }

    function resizeParallaxBackground() {
      const parallaxFactor = 0.5;
      const pageHeight = document.body.scrollHeight;
      const viewportHeight = window.innerHeight;
      const imageHeight = viewportHeight + (pageHeight - viewportHeight) * parallaxFactor;
      bg.style.height = `${imageHeight}px`;
      updateParallax();
    }

    window.addEventListener("scroll", updateParallax);
    window.addEventListener("resize", resizeParallaxBackground);
    window.addEventListener("load", resizeParallaxBackground);
  </script>

	<script>
	  const typeText = (text, target, speed = 40) => {
		let i = 0;
		const interval = setInterval(() => {
		  if (i < text.length) {
			target.textContent += text[i];
			i++;
		  } else {
			clearInterval(interval);
		  }
		}, speed);
	  };

	  const chatBubbles = document.querySelectorAll('.chat-bubble-left, .chat-bubble-right, .chat-bubble-highdetail');

	  const chatObserver = new IntersectionObserver((entries) => {
		entries.forEach(entry => {
		  const container = entry.target;

		  if (entry.isIntersecting) {
			container.classList.add("animate-in");

			const fullText = container.dataset.fulltext;

			// If it hasn't typed before, show dots and animate
			if (!container.dataset.typed) {
			  setTimeout(() => {
				container.innerHTML = ""; // remove typing dots
				const p = document.createElement("p");
				container.appendChild(p);
				typeText(fullText, p);

				// Mark as typed
				container.dataset.typed = "true";
			  }, 3300);
			} else {
			  // Already typed, just show full text instantly
			  container.innerHTML = `<p>${fullText}</p>`;
			}
		  } else {
			container.classList.remove("animate-in");

			// If never typed, show dots; if already typed, preserve text
			if (!container.dataset.typed) {
			  container.innerHTML = '<div class="typing-dots"><span>.</span><span>.</span><span>.</span></div>';
			}
		  }
		});
	  }, {
		threshold: 0.3
	  });

	  chatBubbles.forEach(bubble => {
		// Store the original text
		const originalText = bubble.innerText.trim();
		bubble.dataset.fulltext = originalText;
		bubble.innerHTML = '<div class="typing-dots"><span>.</span><span>.</span><span>.</span></div>';
		chatObserver.observe(bubble);
	  });
	</script>

</body>
</html>